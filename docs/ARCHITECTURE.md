# DeepCode Architecture Guide

## Overview

DeepCodeëŠ” **Multi-Agent ê¸°ë°˜ ì½”ë“œ ìƒì„± ì‹œìŠ¤í…œ**ìœ¼ë¡œ, ì—°êµ¬ ë…¼ë¬¸ì´ë‚˜ ì‚¬ìš©ì ìš”êµ¬ì‚¬í•­ì„ ë¶„ì„í•˜ì—¬ ì‹¤ì œ ì‘ë™í•˜ëŠ” ì½”ë“œë¥¼ ìë™ ìƒì„±í•©ë‹ˆë‹¤.

### í•µì‹¬ íŠ¹ì§•
- ğŸ¤– **Multi-Agent Orchestration**: ì „ë¬¸í™”ëœ ì—ì´ì „íŠ¸ë“¤ì˜ í˜‘ì—…
- ğŸ“„ **ë‹¤ì–‘í•œ ì…ë ¥ ì§€ì›**: PDF, URL, í…ìŠ¤íŠ¸ ìš”êµ¬ì‚¬í•­
- ğŸ”§ **MCP ê¸°ë°˜ ë„êµ¬ ì‹œìŠ¤í…œ**: Model Context Protocolì„ í†µí•œ ëª¨ë“ˆí™”
- ğŸŒ **ë‹¤ì¤‘ ì¸í„°í˜ì´ìŠ¤**: CLI, Web UI (Streamlit)

---

## System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              DeepCode System                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                           â”‚
â”‚   â”‚  CLI        â”‚    â”‚  Web UI     â”‚     â† User Interfaces                     â”‚
â”‚   â”‚ main_cli.py â”‚    â”‚ Streamlit   â”‚                                           â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                                           â”‚
â”‚          â”‚                  â”‚                                                   â”‚
â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                   â”‚
â”‚                   â†“                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚
â”‚   â”‚      Agent Orchestration Engine       â”‚  â† Master Coordinator              â”‚
â”‚   â”‚  agent_orchestration_engine.py        â”‚                                    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
â”‚                       â†“                                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚   â”‚                    Specialized Agents                           â”‚          â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚          â”‚
â”‚   â”‚  â”‚ Requirement  â”‚ â”‚   Document   â”‚ â”‚    Code      â”‚            â”‚          â”‚
â”‚   â”‚  â”‚   Analysis   â”‚ â”‚ Segmentation â”‚ â”‚Implementationâ”‚            â”‚          â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚          â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚          â”‚
â”‚   â”‚  â”‚   Concept    â”‚ â”‚  Algorithm   â”‚ â”‚     Code     â”‚            â”‚          â”‚
â”‚   â”‚  â”‚   Analysis   â”‚ â”‚   Analysis   â”‚ â”‚    Planner   â”‚            â”‚          â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                             â†“                                                   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚   â”‚                      MCP Tool Servers                           â”‚          â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚          â”‚
â”‚   â”‚  â”‚ filesystem â”‚ â”‚code-impl   â”‚ â”‚doc-segment â”‚ â”‚code-indexerâ”‚   â”‚          â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚          â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚          â”‚
â”‚   â”‚  â”‚pdf-downloadâ”‚ â”‚git-command â”‚ â”‚  search    â”‚ â”‚cmd-executorâ”‚   â”‚          â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                             â†“                                                   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚   â”‚                     LLM Providers                               â”‚          â”‚
â”‚   â”‚        Anthropic  â”‚  Google Gemini  â”‚  OpenAI/vLLM             â”‚          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Directory Structure

```
DeepCode/
â”œâ”€â”€ cli/                           # CLI ì¸í„°í˜ì´ìŠ¤
â”‚   â”œâ”€â”€ main_cli.py               # CLI ì§„ì…ì 
â”‚   â”œâ”€â”€ cli_app.py                # CLI ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œì§
â”‚   â”œâ”€â”€ cli_interface.py          # í„°ë¯¸ë„ UI (ë©”ë‰´, ìƒ‰ìƒ)
â”‚   â””â”€â”€ workflows/                # CLI-ì›Œí¬í”Œë¡œìš° ì—°ê²°
â”‚       â””â”€â”€ cli_workflow_adapter.py
â”‚
â”œâ”€â”€ ui/                            # Web UI (Streamlit)
â”‚   â”œâ”€â”€ layout.py                 # í˜ì´ì§€ ë ˆì´ì•„ì›ƒ
â”‚   â”œâ”€â”€ components.py             # UI ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ handlers.py               # ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
â”‚   â””â”€â”€ styles.py                 # CSS ìŠ¤íƒ€ì¼ë§
â”‚
â”œâ”€â”€ workflows/                     # ì›Œí¬í”Œë¡œìš° ì—”ì§„
â”‚   â”œâ”€â”€ agent_orchestration_engine.py  # ğŸ”¥ í•µì‹¬: ì—ì´ì „íŠ¸ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜
â”‚   â”œâ”€â”€ code_implementation_workflow.py
â”‚   â”œâ”€â”€ code_implementation_workflow_index.py
â”‚   â”œâ”€â”€ codebase_index_workflow.py
â”‚   â””â”€â”€ agents/                   # ì „ë¬¸í™”ëœ ì—ì´ì „íŠ¸ë“¤
â”‚       â”œâ”€â”€ requirement_analysis_agent.py
â”‚       â”œâ”€â”€ document_segmentation_agent.py
â”‚       â””â”€â”€ code_implementation_agent.py
â”‚
â”œâ”€â”€ tools/                         # MCP ë„êµ¬ ì„œë²„ë“¤
â”‚   â”œâ”€â”€ code_implementation_server.py  # íŒŒì¼ ìƒì„±/ì‹¤í–‰
â”‚   â”œâ”€â”€ code_reference_indexer.py     # ì½”ë“œ ê²€ìƒ‰
â”‚   â”œâ”€â”€ code_indexer.py               # ì¸ë±ìŠ¤ ìƒì„±
â”‚   â”œâ”€â”€ document_segmentation_server.py
â”‚   â”œâ”€â”€ pdf_downloader.py
â”‚   â”œâ”€â”€ git_command.py
â”‚   â””â”€â”€ run_reference_indexer.py  # ë…ë¦½ ì¸ë±ì‹± ìŠ¤í¬ë¦½íŠ¸
â”‚
â”œâ”€â”€ prompts/                       # í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿
â”‚   â””â”€â”€ code_prompts.py           # ~1,800ì¤„ì˜ í”„ë¡¬í”„íŠ¸ ì •ì˜
â”‚
â”œâ”€â”€ utils/                         # ìœ í‹¸ë¦¬í‹°
â”‚   â””â”€â”€ llm_utils.py              # LLM ì„¤ì • ê´€ë¦¬
â”‚
â”œâ”€â”€ config/                        # ì„¤ì •
â”‚   â””â”€â”€ mcp_tool_definitions.py
â”‚
â”œâ”€â”€ deepcode_lab/                  # ì‘ì—… ë””ë ‰í† ë¦¬
â”‚   â”œâ”€â”€ papers/                   # ì²˜ë¦¬ëœ ë…¼ë¬¸ ê²°ê³¼
â”‚   â”œâ”€â”€ reference_code/           # ì°¸ì¡° ì½”ë“œë² ì´ìŠ¤
â”‚   â””â”€â”€ indexes/                  # ì½”ë“œ ì¸ë±ìŠ¤
â”‚
â”œâ”€â”€ mcp_agent.config.yaml          # MCP ë° LLM ì„¤ì •
â”œâ”€â”€ mcp_agent.secrets.yaml         # API í‚¤
â””â”€â”€ deepcode.py                    # Web UI ì§„ì…ì 
```

---

## Core Components

### 1. Entry Points (ì§„ì…ì )

| íŒŒì¼ | ìš©ë„ | ì‹¤í–‰ ë°©ë²• |
|------|------|----------|
| `cli/main_cli.py` | CLI ì¸í„°í˜ì´ìŠ¤ | `python cli/main_cli.py` |
| `deepcode.py` | Web UI ëŸ°ì²˜ | `streamlit run deepcode.py` |

### 2. Agent Orchestration Engine (ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ ì—”ì§„)

**íŒŒì¼:** `workflows/agent_orchestration_engine.py` (~2,000ì¤„)

í•µì‹¬ í•¨ìˆ˜ë“¤:

| í•¨ìˆ˜ | ì—­í•  |
|------|------|
| `execute_multi_agent_research_pipeline()` | ë…¼ë¬¸ â†’ ì½”ë“œ ì „ì²´ íŒŒì´í”„ë¼ì¸ |
| `execute_chat_based_planning_pipeline()` | ì±„íŒ… â†’ ì½”ë“œ íŒŒì´í”„ë¼ì¸ |
| `run_research_analyzer()` | ì…ë ¥ ë¶„ì„ (JSON ë©”íƒ€ë°ì´í„° ì¶”ì¶œ) |
| `run_code_analyzer()` | ê°œë…/ì•Œê³ ë¦¬ì¦˜ ë¶„ì„ â†’ YAML ê³„íš |
| `run_chat_planning_agent()` | ì±„íŒ…ì—ì„œ êµ¬í˜„ ê³„íš ìƒì„± |

### 3. Specialized Agents (ì „ë¬¸ ì—ì´ì „íŠ¸)

| ì—ì´ì „íŠ¸ | ì—­í•  | íŒŒì¼ |
|---------|------|------|
| **RequirementAnalysisAgent** | ìš”êµ¬ì‚¬í•­ ë¶„ì„ ë° ì§ˆë¬¸ ìƒì„± | `agents/requirement_analysis_agent.py` |
| **DocumentSegmentationAgent** | ëŒ€ìš©ëŸ‰ ë¬¸ì„œ ì§€ëŠ¥í˜• ë¶„í•  | `agents/document_segmentation_agent.py` |
| **CodeImplementationAgent** | íŒŒì¼ë³„ ì½”ë“œ ìƒì„± ì¶”ì  | `agents/code_implementation_agent.py` |
| **ConceptAnalysisAgent** | ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ì¶”ì¶œ | `agent_orchestration_engine.py` ë‚´ |
| **AlgorithmAnalysisAgent** | ì•Œê³ ë¦¬ì¦˜/ìˆ˜ì‹ ì¶”ì¶œ | `agent_orchestration_engine.py` ë‚´ |
| **CodePlannerAgent** | ë¶„ì„ ê²°ê³¼ â†’ YAML ê³„íš í†µí•© | `agent_orchestration_engine.py` ë‚´ |

### 4. MCP Tool Servers (ë„êµ¬ ì„œë²„)

```yaml
# mcp_agent.config.yamlì— ì •ì˜ë¨

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        MCP Tool Servers                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  ğŸ—‚ï¸ filesystem                 íŒŒì¼ ì‹œìŠ¤í…œ ì ‘ê·¼                  â”‚
â”‚     â†’ npx @modelcontextprotocol/server-filesystem               â”‚
â”‚                                                                 â”‚
â”‚  ğŸ“ code-implementation        íŒŒì¼ ìƒì„±, ì½”ë“œ ì‹¤í–‰              â”‚
â”‚     â†’ python tools/code_implementation_server.py                â”‚
â”‚     Tools: write_file, execute_python, execute_bash             â”‚
â”‚                                                                 â”‚
â”‚  ğŸ“„ document-segmentation      ëŒ€ìš©ëŸ‰ ë¬¸ì„œ ì§€ëŠ¥í˜• ë¶„í•            â”‚
â”‚     â†’ python tools/document_segmentation_server.py              â”‚
â”‚     Tools: analyze_document, get_segment                        â”‚
â”‚                                                                 â”‚
â”‚  ğŸ” code-reference-indexer     ì½”ë“œ ì¸ë±ìŠ¤ ê²€ìƒ‰                  â”‚
â”‚     â†’ python tools/code_reference_indexer.py                    â”‚
â”‚     Tools: search_code_references, get_indexes_overview         â”‚
â”‚                                                                 â”‚
â”‚  ğŸ“¥ file-downloader            PDF/ë¬¸ì„œ ë‹¤ìš´ë¡œë“œ                 â”‚
â”‚     â†’ python tools/pdf_downloader.py                            â”‚
â”‚     Tools: download_file                                        â”‚
â”‚                                                                 â”‚
â”‚  ğŸ™ github-downloader          Git ë ˆí¬ì§€í† ë¦¬ í´ë¡               â”‚
â”‚     â†’ python tools/git_command.py                               â”‚
â”‚     Tools: clone_repository                                     â”‚
â”‚                                                                 â”‚
â”‚  ğŸŒ brave / bocha-mcp          ì›¹ ê²€ìƒ‰                          â”‚
â”‚     â†’ Brave Search / Bocha API                                  â”‚
â”‚                                                                 â”‚
â”‚  âš¡ command-executor           ì‹œìŠ¤í…œ ëª…ë ¹ì–´ ì‹¤í–‰               â”‚
â”‚     â†’ python tools/command_executor.py                          â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Execution Pipelines

### Pipeline A: ì—°êµ¬ ë…¼ë¬¸ â†’ ì½”ë“œ ìƒì„±

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          execute_multi_agent_research_pipeline()                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  Phase 0: Workspace Setup                                       â”‚
â”‚  â””â”€ deepcode_lab/papers/{id}/ ë””ë ‰í† ë¦¬ ìƒì„±                     â”‚
â”‚                                                                 â”‚
â”‚  Phase 1: Research Analysis                                     â”‚
â”‚  â”œâ”€ run_research_analyzer()                                     â”‚
â”‚  â”‚   â†’ PAPER_INPUT_ANALYZER_PROMPT                              â”‚
â”‚  â”‚   â†’ JSON: {input_type, path, paper_info}                     â”‚
â”‚  â””â”€ run_resource_processor()                                    â”‚
â”‚      â†’ íŒŒì¼ ë³µì‚¬ ë˜ëŠ” URL ë‹¤ìš´ë¡œë“œ                               â”‚
â”‚                                                                 â”‚
â”‚  Phase 2: Workspace Synthesis                                   â”‚
â”‚  â””â”€ synthesize_workspace_infrastructure_agent()                 â”‚
â”‚      â†’ íŒŒì¼ êµ¬ì¡° ë©”íƒ€ë°ì´í„° ìƒì„±                                 â”‚
â”‚                                                                 â”‚
â”‚  Phase 3.5: Document Preprocessing (ì˜µì…˜)                       â”‚
â”‚  â””â”€ orchestrate_document_preprocessing_agent()                  â”‚
â”‚      â†’ ëŒ€ìš©ëŸ‰ ë¬¸ì„œì¸ ê²½ìš° ì„¸ê·¸ë¨¼í…Œì´ì…˜                           â”‚
â”‚                                                                 â”‚
â”‚  Phase 4: Code Planning                                         â”‚
â”‚  â””â”€ run_code_analyzer()                                         â”‚
â”‚      â”œâ”€ ConceptAnalysisAgent  â”€â”€â”                               â”‚
â”‚      â”œâ”€ AlgorithmAnalysisAgent â”€â”¼â”€ ParallelLLM                  â”‚
â”‚      â””â”€ CodePlannerAgent      â”€â”€â”˜                               â”‚
â”‚          â†’ YAML Implementation Plan                             â”‚
â”‚                                                                 â”‚
â”‚  Phase 5-7: Reference Intelligence (enable_indexing=True)       â”‚
â”‚  â”œâ”€ paper_reference_analyzer() â†’ GitHub ë ˆí¬ ì‹ë³„               â”‚
â”‚  â”œâ”€ github_repo_download() â†’ ë ˆí¬ì§€í† ë¦¬ í´ë¡                     â”‚
â”‚  â””â”€ run_codebase_indexing() â†’ ì¸ë±ìŠ¤ ìƒì„±                       â”‚
â”‚                                                                 â”‚
â”‚  Phase 8: Code Implementation                                   â”‚
â”‚  â””â”€ CodeImplementationWorkflow.run_workflow()                   â”‚
â”‚      â†’ íŒŒì¼ë³„ ì½”ë“œ ìƒì„±                                          â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Pipeline B: ì±„íŒ… ìš”êµ¬ì‚¬í•­ â†’ ì½”ë“œ ìƒì„±

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          execute_chat_based_planning_pipeline()                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  Phase 0: Workspace Setup                                       â”‚
â”‚  â””â”€ deepcode_lab/papers/{id}/ ë””ë ‰í† ë¦¬ ìƒì„±                     â”‚
â”‚                                                                 â”‚
â”‚  Phase 1: Chat-Based Planning                                   â”‚
â”‚  â””â”€ run_chat_planning_agent()                                   â”‚
â”‚      â†’ CHAT_AGENT_PLANNING_PROMPT                               â”‚
â”‚      â†’ YAML Implementation Plan                                 â”‚
â”‚                                                                 â”‚
â”‚  Phase 2: Workspace Synthesis                                   â”‚
â”‚  â””â”€ initial_plan.txt ì €ì¥                                       â”‚
â”‚                                                                 â”‚
â”‚  Phase 3: Code Implementation                                   â”‚
â”‚  â””â”€ CodeImplementationWorkflow.run_workflow()                   â”‚
â”‚      â†’ íŒŒì¼ë³„ ì½”ë“œ ìƒì„±                                          â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Pipeline C: ìš”êµ¬ì‚¬í•­ ë¶„ì„ (ì¸í„°ë™í‹°ë¸Œ)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              process_requirement_analysis()                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  Step 1: ê°€ì´ë“œ ì§ˆë¬¸ ìƒì„±                                        â”‚
â”‚  â””â”€ RequirementAnalysisAgent.generate_guiding_questions()       â”‚
â”‚      â†’ 5-8ê°œì˜ ë§ì¶¤í˜• ì§ˆë¬¸                                       â”‚
â”‚                                                                 â”‚
â”‚  Step 2: ì‚¬ìš©ì ë‹µë³€ ìˆ˜ì§‘                                        â”‚
â”‚  â””â”€ CLI/UIë¥¼ í†µí•´ ê° ì§ˆë¬¸ì— ë‹µë³€                                 â”‚
â”‚                                                                 â”‚
â”‚  Step 3: ìš”êµ¬ì‚¬í•­ ë¬¸ì„œ ìƒì„±                                      â”‚
â”‚  â””â”€ RequirementAnalysisAgent.summarize_detailed_requirements()  â”‚
â”‚      â†’ ìƒì„¸ ìš”êµ¬ì‚¬í•­ ë¬¸ì„œ                                        â”‚
â”‚                                                                 â”‚
â”‚  Step 4: ì½”ë“œ êµ¬í˜„ìœ¼ë¡œ ì§„í–‰                                      â”‚
â”‚  â””â”€ execute_chat_based_planning_pipeline()                      â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Example Flow: ì—°êµ¬ ë…¼ë¬¸ì—ì„œ ì½”ë“œ ìƒì„±

### ì˜ˆì‹œ ì…ë ¥

```bash
python cli/main_cli.py --url "https://arxiv.org/pdf/2305.xxxxx.pdf"
```

ë˜ëŠ” Web UIì—ì„œ arXiv URL ì…ë ¥

### ìƒì„¸ í”Œë¡œìš°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì‚¬ìš©ì ì…ë ¥: "https://arxiv.org/pdf/2305.12345.pdf"                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Phase 1: Research Analysis                                                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                                â”‚
â”‚  ResearchAnalyzerAgent:                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Prompt: PAPER_INPUT_ANALYZER_PROMPT                                     â”‚  â”‚
â”‚  â”‚                                                                         â”‚  â”‚
â”‚  â”‚ "Analyze this input and determine if it's a file path, URL, or paper   â”‚  â”‚
â”‚  â”‚  title. Extract metadata and categorize the input type."               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                    â†“                                           â”‚
â”‚  Output JSON:                                                                  â”‚
â”‚  {                                                                             â”‚
â”‚    "input_type": "url",                                                        â”‚
â”‚    "path": "https://arxiv.org/pdf/2305.12345.pdf",                            â”‚
â”‚    "paper_info": {                                                             â”‚
â”‚      "title": "DiffRec: Diffusion Model for Recommendation",                  â”‚
â”‚      "domain": "Machine Learning / Recommendation Systems"                    â”‚
â”‚    }                                                                           â”‚
â”‚  }                                                                             â”‚
â”‚                                                                                â”‚
â”‚  ResourceProcessor:                                                            â”‚
â”‚  â†’ download_file_to() í˜¸ì¶œ                                                     â”‚
â”‚  â†’ deepcode_lab/papers/1/paper.pdf ì €ì¥                                       â”‚
â”‚  â†’ PDF â†’ Markdown ë³€í™˜                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Phase 3.5: Document Preprocessing                                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                                â”‚
â”‚  ë¬¸ì„œ í¬ê¸° ì²´í¬: 50,000ì ì´ìƒ?                                                â”‚
â”‚  â””â”€ Yes: DocumentSegmentationAgent í™œì„±í™”                                     â”‚
â”‚          â†’ ë…¼ë¬¸ì„ ì˜ë¯¸ ë‹¨ìœ„ë¡œ ë¶„í•                                              â”‚
â”‚          â†’ ê° ì„¸ê·¸ë¨¼íŠ¸: Introduction, Methods, Architecture, etc.             â”‚
â”‚  â””â”€ No: ì „ì²´ ë¬¸ì„œ ì‚¬ìš©                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Phase 4: Code Planning (ParallelLLM)                                         â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                   â”‚
â”‚  â”‚ConceptAnalysis  â”‚    â”‚AlgorithmAnalysisâ”‚                                   â”‚
â”‚  â”‚     Agent       â”‚    â”‚     Agent       â”‚      â† ë³‘ë ¬ ì‹¤í–‰                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                   â”‚
â”‚           â”‚                      â”‚                                             â”‚
â”‚           â”‚  Output:             â”‚  Output:                                    â”‚
â”‚           â”‚  - ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜    â”‚  - ì•Œê³ ë¦¬ì¦˜ ì„¤ëª…                            â”‚
â”‚           â”‚  - ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°      â”‚  - ìˆ˜í•™ ê³µì‹                                â”‚
â”‚           â”‚  - ìš”êµ¬ì‚¬í•­          â”‚  - í•˜ì´í¼íŒŒë¼ë¯¸í„°                            â”‚
â”‚           â”‚                      â”‚                                             â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                             â”‚
â”‚                      â†“                                                         â”‚
â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                             â”‚
â”‚           â”‚  CodePlannerAgent    â”‚      â† í†µí•©                                â”‚
â”‚           â”‚  (Fan-in Agent)      â”‚                                             â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                             â”‚
â”‚                      â”‚                                                         â”‚
â”‚                      â†“                                                         â”‚
â”‚  Output: YAML Implementation Plan                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ project_overview:                                                       â”‚  â”‚
â”‚  â”‚   name: "DiffRec Implementation"                                        â”‚  â”‚
â”‚  â”‚   description: "Diffusion-based Recommendation System"                  â”‚  â”‚
â”‚  â”‚                                                                         â”‚  â”‚
â”‚  â”‚ file_structure:                                                         â”‚  â”‚
â”‚  â”‚   - path: "src/models/diffusion.py"                                     â”‚  â”‚
â”‚  â”‚     purpose: "Core diffusion process implementation"                    â”‚  â”‚
â”‚  â”‚   - path: "src/models/denoiser.py"                                      â”‚  â”‚
â”‚  â”‚     purpose: "Denoising MLP network"                                    â”‚  â”‚
â”‚  â”‚   - path: "src/utils/scheduler.py"                                      â”‚  â”‚
â”‚  â”‚     purpose: "Noise scheduling utilities"                               â”‚  â”‚
â”‚  â”‚   ...                                                                   â”‚  â”‚
â”‚  â”‚                                                                         â”‚  â”‚
â”‚  â”‚ implementation_components:                                               â”‚  â”‚
â”‚  â”‚   - name: "Forward Diffusion"                                           â”‚  â”‚
â”‚  â”‚     algorithm: "q(x_t|x_0) = N(x_t; âˆšá¾±_t x_0, (1-á¾±_t)I)"              â”‚  â”‚
â”‚  â”‚   ...                                                                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Phase 8: Code Implementation                                                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                                â”‚
â”‚  CodeImplementationWorkflow:                                                   â”‚
â”‚                                                                                â”‚
â”‚  For each file in plan:                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 1. ì˜ì¡´ì„± ë¶„ì„                                                          â”‚  â”‚
â”‚  â”‚    â†’ ì´ íŒŒì¼ì´ ì°¸ì¡°í•˜ëŠ” ë‹¤ë¥¸ íŒŒì¼ í™•ì¸                                   â”‚  â”‚
â”‚  â”‚                                                                         â”‚  â”‚
â”‚  â”‚ 2. ì»¨í…ìŠ¤íŠ¸ ìˆ˜ì§‘                                                        â”‚  â”‚
â”‚  â”‚    â†’ ê´€ë ¨ íŒŒì¼ ì½ê¸° (read_file tool)                                    â”‚  â”‚
â”‚  â”‚    â†’ ì¸ë±ì‹± í™œì„±í™”ì‹œ: search_code_references() í˜¸ì¶œ                     â”‚  â”‚
â”‚  â”‚                                                                         â”‚  â”‚
â”‚  â”‚ 3. ì½”ë“œ ìƒì„±                                                            â”‚  â”‚
â”‚  â”‚    â†’ PURE_CODE_IMPLEMENTATION_SYSTEM_PROMPT                             â”‚  â”‚
â”‚  â”‚    â†’ LLMì´ íŒŒì¼ ë‚´ìš© ìƒì„±                                               â”‚  â”‚
â”‚  â”‚                                                                         â”‚  â”‚
â”‚  â”‚ 4. íŒŒì¼ ì €ì¥                                                            â”‚  â”‚
â”‚  â”‚    â†’ write_file tool í˜¸ì¶œ                                               â”‚  â”‚
â”‚  â”‚    â†’ deepcode_lab/papers/1/code/src/models/diffusion.py                â”‚  â”‚
â”‚  â”‚                                                                         â”‚  â”‚
â”‚  â”‚ 5. ê²€ì¦ & ë‹¤ìŒ íŒŒì¼ë¡œ                                                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                                â”‚
â”‚  Generated Files:                                                              â”‚
â”‚  deepcode_lab/papers/1/code/                                                  â”‚
â”‚  â”œâ”€â”€ src/                                                                      â”‚
â”‚  â”‚   â”œâ”€â”€ models/                                                               â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ diffusion.py      âœ…                                             â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ denoiser.py       âœ…                                             â”‚
â”‚  â”‚   â”‚   â””â”€â”€ recommender.py    âœ…                                             â”‚
â”‚  â”‚   â”œâ”€â”€ utils/                                                                â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ scheduler.py      âœ…                                             â”‚
â”‚  â”‚   â”‚   â””â”€â”€ metrics.py        âœ…                                             â”‚
â”‚  â”‚   â””â”€â”€ configs/                                                              â”‚
â”‚  â”‚       â””â”€â”€ default.yaml      âœ…                                             â”‚
â”‚  â”œâ”€â”€ tests/                                                                    â”‚
â”‚  â”‚   â””â”€â”€ test_diffusion.py     âœ…                                             â”‚
â”‚  â”œâ”€â”€ requirements.txt          âœ…                                             â”‚
â”‚  â””â”€â”€ README.md                 âœ…                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì™„ë£Œ!                                                                         â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                                â”‚
â”‚  ê²°ê³¼ ìœ„ì¹˜: deepcode_lab/papers/1/                                            â”‚
â”‚  â”œâ”€â”€ paper.pdf           # ì›ë³¸ ë…¼ë¬¸                                          â”‚
â”‚  â”œâ”€â”€ paper.md            # ë³€í™˜ëœ ë§ˆí¬ë‹¤ìš´                                     â”‚
â”‚  â”œâ”€â”€ initial_plan.txt    # YAML êµ¬í˜„ ê³„íš                                     â”‚
â”‚  â””â”€â”€ code/               # ìƒì„±ëœ ì½”ë“œ                                         â”‚
â”‚                                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Example Flow: ì±„íŒ… ìš”êµ¬ì‚¬í•­ì—ì„œ ì½”ë“œ ìƒì„±

### ì˜ˆì‹œ ì…ë ¥

```bash
python cli/main_cli.py --chat "Create a REST API for a todo list application with user authentication, CRUD operations, and PostgreSQL database"
```

### ìƒì„¸ í”Œë¡œìš°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì‚¬ìš©ì ì…ë ¥:                                                                  â”‚
â”‚  "Create a REST API for a todo list application with user authentication,     â”‚
â”‚   CRUD operations, and PostgreSQL database"                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Phase 1: Chat-Based Planning                                                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                                â”‚
â”‚  ChatPlanningAgent:                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Prompt: CHAT_AGENT_PLANNING_PROMPT                                      â”‚  â”‚
â”‚  â”‚                                                                         â”‚  â”‚
â”‚  â”‚ "You are a senior software architect. Transform the user's coding      â”‚  â”‚
â”‚  â”‚  requirements into a detailed YAML implementation plan..."              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                                â”‚
â”‚  Output: YAML Implementation Plan                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ project_overview:                                                       â”‚  â”‚
â”‚  â”‚   name: "Todo API"                                                      â”‚  â”‚
â”‚  â”‚   tech_stack: [FastAPI, PostgreSQL, SQLAlchemy, JWT]                   â”‚  â”‚
â”‚  â”‚                                                                         â”‚  â”‚
â”‚  â”‚ file_structure:                                                         â”‚  â”‚
â”‚  â”‚   - path: "app/main.py"                                                 â”‚  â”‚
â”‚  â”‚   - path: "app/models/user.py"                                          â”‚  â”‚
â”‚  â”‚   - path: "app/models/todo.py"                                          â”‚  â”‚
â”‚  â”‚   - path: "app/routers/auth.py"                                         â”‚  â”‚
â”‚  â”‚   - path: "app/routers/todos.py"                                        â”‚  â”‚
â”‚  â”‚   - path: "app/database.py"                                             â”‚  â”‚
â”‚  â”‚   - path: "app/schemas.py"                                              â”‚  â”‚
â”‚  â”‚   ...                                                                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Phase 3: Code Implementation                                                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                                â”‚
â”‚  CodeImplementationWorkflow:                                                   â”‚
â”‚  â†’ GENERAL_CODE_IMPLEMENTATION_SYSTEM_PROMPT ì‚¬ìš©                             â”‚
â”‚  â†’ ê° íŒŒì¼ ìˆœì°¨ ìƒì„±                                                          â”‚
â”‚                                                                                â”‚
â”‚  Generated:                                                                     â”‚
â”‚  deepcode_lab/papers/2/code/                                                  â”‚
â”‚  â”œâ”€â”€ app/                                                                      â”‚
â”‚  â”‚   â”œâ”€â”€ main.py              # FastAPI ì•± ì§„ì…ì                              â”‚
â”‚  â”‚   â”œâ”€â”€ database.py          # DB ì—°ê²° ì„¤ì •                                  â”‚
â”‚  â”‚   â”œâ”€â”€ models/                                                               â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ user.py          # User SQLAlchemy ëª¨ë¸                         â”‚
â”‚  â”‚   â”‚   â””â”€â”€ todo.py          # Todo SQLAlchemy ëª¨ë¸                         â”‚
â”‚  â”‚   â”œâ”€â”€ routers/                                                              â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ auth.py          # ì¸ì¦ ì—”ë“œí¬ì¸íŠ¸                               â”‚
â”‚  â”‚   â”‚   â””â”€â”€ todos.py         # CRUD ì—”ë“œí¬ì¸íŠ¸                               â”‚
â”‚  â”‚   â””â”€â”€ schemas.py           # Pydantic ìŠ¤í‚¤ë§ˆ                               â”‚
â”‚  â”œâ”€â”€ tests/                                                                    â”‚
â”‚  â”œâ”€â”€ requirements.txt                                                          â”‚
â”‚  â””â”€â”€ README.md                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Prompt System

### ì£¼ìš” í”„ë¡¬í”„íŠ¸ (`prompts/code_prompts.py`)

| í”„ë¡¬í”„íŠ¸ | ìš©ë„ | ì‚¬ìš© ì—ì´ì „íŠ¸ |
|---------|------|--------------|
| `PAPER_INPUT_ANALYZER_PROMPT` | ì…ë ¥ ë¶„ì„ ë° ë¶„ë¥˜ | ResearchAnalyzerAgent |
| `PAPER_CONCEPT_ANALYSIS_PROMPT` | ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ì¶”ì¶œ | ConceptAnalysisAgent |
| `PAPER_ALGORITHM_ANALYSIS_PROMPT` | ì•Œê³ ë¦¬ì¦˜/ìˆ˜ì‹ ì¶”ì¶œ | AlgorithmAnalysisAgent |
| `CODE_PLANNING_PROMPT` | YAML ê³„íš ìƒì„± | CodePlannerAgent |
| `CHAT_AGENT_PLANNING_PROMPT` | ì±„íŒ…â†’ê³„íš ë³€í™˜ | ChatPlanningAgent |
| `PURE_CODE_IMPLEMENTATION_SYSTEM_PROMPT` | ë…¼ë¬¸ ê¸°ë°˜ ì½”ë“œ ìƒì„± | CodeImplementationWorkflow |
| `GENERAL_CODE_IMPLEMENTATION_SYSTEM_PROMPT` | ì¼ë°˜ ì½”ë“œ ìƒì„± | CodeImplementationWorkflow |
| `PAPER_REFERENCE_ANALYZER_PROMPT` | ì°¸ì¡° GitHub ë ˆí¬ ì‹ë³„ | ReferenceAnalysisAgent |

### í”„ë¡¬í”„íŠ¸ ë³€í˜•

- **Traditional vs Segmented**: ë¬¸ì„œ ë¶„í•  ì§€ì› ì—¬ë¶€
- **Pure vs General**: í•™ìˆ  ë…¼ë¬¸ vs ì¼ë°˜ ìš”êµ¬ì‚¬í•­
- **Index vs Non-Index**: ì½”ë“œ ì¸ë±ì‹± í™œìš© ì—¬ë¶€

---

## Configuration

### mcp_agent.config.yaml

```yaml
# LLM ì œê³µì ì„ íƒ
llm_provider: "google"  # "anthropic", "openai" ì¤‘ ì„ íƒ

# ì œê³µìë³„ ëª¨ë¸ ì„¤ì •
google:
  default_model: "gemini-3-pro-preview"
  planning_model: "gemini-3-pro-preview"
  implementation_model: "gemini-2.5-flash"

anthropic:
  default_model: "claude-sonnet-4.5"
  implementation_model: "claude-sonnet-3.5"

openai:
  default_model: "o3-mini"
  implementation_model: "gpt-4o"

# ë¬¸ì„œ ì„¸ê·¸ë¨¼í…Œì´ì…˜ ì„¤ì •
document_segmentation:
  enabled: false
  size_threshold_chars: 50000

# MCP ì„œë²„ ì •ì˜
mcp:
  servers:
    filesystem: ...
    code-implementation: ...
    document-segmentation: ...
    code-reference-indexer: ...
    ...
```

### mcp_agent.secrets.yaml

```yaml
# API í‚¤ ì„¤ì • (í™˜ê²½ë³€ìˆ˜ë¡œë„ ê°€ëŠ¥)
google:
  api_key: "your-google-api-key"

anthropic:
  api_key: "your-anthropic-api-key"

openai:
  api_key: "your-openai-api-key"
  base_url: "https://api.openai.com/v1"  # ë˜ëŠ” vLLM ì—”ë“œí¬ì¸íŠ¸
```

---

## Execution Modes

| ëª¨ë“œ | ëª…ë ¹ì–´ | ì„¤ëª… |
|------|--------|------|
| **Interactive** | `python cli/main_cli.py` | ë©”ë‰´ ê¸°ë°˜ ëŒ€í™”í˜• |
| **File Direct** | `python cli/main_cli.py --file paper.pdf` | íŒŒì¼ ì§ì ‘ ì²˜ë¦¬ |
| **URL Direct** | `python cli/main_cli.py --url <url>` | URL ì§ì ‘ ì²˜ë¦¬ |
| **Chat Direct** | `python cli/main_cli.py --chat "..."` | ìš”êµ¬ì‚¬í•­ ì§ì ‘ ì²˜ë¦¬ |
| **Requirement Analysis** | `python cli/main_cli.py --requirement "..."` | ê°€ì´ë“œ Q&A |
| **Web UI** | `streamlit run deepcode.py` | ì›¹ ì¸í„°í˜ì´ìŠ¤ |
| **Optimized** | `python cli/main_cli.py --optimized` | ì¸ë±ì‹± ë¹„í™œì„±í™” |
| **With Indexing** | `python cli/main_cli.py --enable-indexing` | ì¸ë±ì‹± í™œì„±í™” |
| **Compatibility** | `python cli/main_cli.py --simple` | PTY í˜¸í™˜ ëª¨ë“œ |

---

## Error Handling & Recovery

### Token Overflow Recovery

```python
# agent_orchestration_engine.py

for attempt in range(max_retries):
    try:
        result = await agent.run()

        # ê²°ê³¼ í’ˆì§ˆ í‰ê°€
        score = _assess_output_completeness(result)

        if score >= threshold:
            return result

        # ì¬ì‹œë„ë¥¼ ìœ„í•œ íŒŒë¼ë¯¸í„° ì¡°ì •
        params = _adjust_params_for_retry(params, attempt)

    except TokenLimitError:
        # í† í° ì œí•œ ì¤„ì´ê¸°
        params.max_tokens *= 0.8
```

### Fallback ì „ëµ

1. **íŒŒì¼ ì²˜ë¦¬ ì‹¤íŒ¨** â†’ LLM ì—ì´ì „íŠ¸ë¡œ ëŒ€ì²´
2. **API ì˜¤ë¥˜** â†’ ì¬ì‹œë„ (ìµœëŒ€ 3íšŒ)
3. **ì„¸ê·¸ë¨¼í…Œì´ì…˜ ì‹¤íŒ¨** â†’ ì „ì²´ ë¬¸ì„œ ëª¨ë“œë¡œ ì „í™˜

---

## Summary

DeepCodeëŠ” **ì—°êµ¬ ë…¼ë¬¸ê³¼ ì‚¬ìš©ì ìš”êµ¬ì‚¬í•­ì„ ì‹¤ì œ ì‘ë™í•˜ëŠ” ì½”ë“œë¡œ ë³€í™˜**í•˜ëŠ” ì¢…í•©ì ì¸ AI ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

### í•µì‹¬ ê°€ì¹˜
- ğŸ¯ **ìë™í™”**: ë³µì¡í•œ ë…¼ë¬¸ ë¶„ì„ë¶€í„° ì½”ë“œ ìƒì„±ê¹Œì§€ ìë™í™”
- ğŸ§  **ì§€ëŠ¥í˜•**: ë‹¤ì¤‘ ì—ì´ì „íŠ¸ í˜‘ì—…ìœ¼ë¡œ ë†’ì€ í’ˆì§ˆì˜ ê²°ê³¼ë¬¼
- ğŸ”§ **í™•ì¥ì„±**: MCP ê¸°ë°˜ ëª¨ë“ˆí™”ë¡œ ì‰¬ìš´ í™•ì¥
- ğŸŒ **ìœ ì—°ì„±**: ë‹¤ì–‘í•œ ì…ë ¥(ë…¼ë¬¸, URL, í…ìŠ¤íŠ¸)ê³¼ ì¸í„°í˜ì´ìŠ¤ ì§€ì›
